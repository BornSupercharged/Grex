<Window x:Class="Grex.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="using:Grex.Controls"
        xmlns:viewModels="using:Grex.ViewModels">
    <Grid x:Name="RootGrid" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState x:Name="Wide">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="800"/>
                    </VisualState.StateTriggers>
                </VisualState>
                <VisualState x:Name="Narrow">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <SplitView x:Name="MainSplitView"
                   Grid.Row="0"
                   IsPaneOpen="False"
                   DisplayMode="CompactInline"
                   OpenPaneLength="200"
                   CompactPaneLength="48">
            <SplitView.Pane>
                <NavigationView x:Name="MainNavigationView"
                               IsBackButtonVisible="Collapsed"
                               IsSettingsVisible="False"
                               PaneDisplayMode="Left"
                               SelectionChanged="NavigationView_SelectionChanged">
                    <NavigationView.MenuItems>
                        <NavigationViewItem x:Name="SearchNavItem"
                                          x:Uid="SearchNavItem"
                                          Icon="Find"
                                          Tag="Search"
                                          PointerEntered="NavigationItem_PointerEntered"
                                          PointerExited="NavigationItem_PointerExited"/>
                        <NavigationViewItem x:Name="RegexBuilderNavItem"
                                          x:Uid="RegexBuilderNavItem"
                                          Tag="RegexBuilder"
                                          PointerEntered="NavigationItem_PointerEntered"
                                          PointerExited="NavigationItem_PointerExited">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE943;" FontFamily="{StaticResource SymbolThemeFontFamily}"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem x:Name="SettingsNavItem"
                                          x:Uid="SettingsNavItem"
                                          Icon="Setting"
                                          Tag="Settings"
                                          PointerEntered="NavigationItem_PointerEntered"
                                          PointerExited="NavigationItem_PointerExited"/>
                    </NavigationView.MenuItems>
                    <NavigationView.FooterMenuItems>
                        <NavigationViewItem x:Name="AboutNavItem"
                                          x:Uid="AboutNavItem"
                                          Tag="About"
                                          PointerEntered="NavigationItem_PointerEntered"
                                          PointerExited="NavigationItem_PointerExited">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE946;" FontFamily="{StaticResource SymbolThemeFontFamily}"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                    </NavigationView.FooterMenuItems>
                </NavigationView>
            </SplitView.Pane>
            <SplitView.Content>
                <Grid>
                    <Grid x:Name="SearchContentGrid">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>  <!-- TabView fills available space -->
                            <RowDefinition Height="Auto"/> <!-- InfoBar at bottom -->
                        </Grid.RowDefinitions>
                        <TabView x:Name="MainTabView"
                                 Grid.Row="0"
                                 Margin="0,0,0,0"
                                 IsAddTabButtonVisible="True"
                                 TabCloseRequested="TabView_TabCloseRequested"
                                 AddTabButtonClick="TabView_AddTabButtonClick"
                                 SelectionChanged="TabView_SelectionChanged"
                                 Loaded="MainTabView_Loaded"
                                 PointerEntered="TabView_PointerEntered"
                                 PointerExited="TabView_PointerExited"
                                 TabWidthMode="SizeToContent"/>
                        <InfoBar x:Name="StatusInfoBar"
                                 x:Uid="StatusInfoBar"
                                 Grid.Row="1"
                                 Margin="0"
                                 HorizontalAlignment="Stretch"
                                 IsOpen="True"
                                 IsClosable="False"
                                 IsIconVisible="True"
                                 Severity="Informational">
                            <InfoBar.IconSource>
                                <SymbolIconSource Symbol="Find"/>
                            </InfoBar.IconSource>
                        </InfoBar>
                    </Grid>
                    <Grid x:Name="RegexBuilderContentGrid" Visibility="Collapsed">
                        <controls:RegexBuilderView x:Name="RegexBuilderView"/>
                    </Grid>
                    <Grid x:Name="SettingsContentGrid" Visibility="Collapsed">
                        <controls:SettingsView x:Name="SettingsView"/>
                    </Grid>
                    <Grid x:Name="AboutContentGrid" Visibility="Collapsed">
                        <controls:AboutView x:Name="AboutView"/>
                    </Grid>
                </Grid>
            </SplitView.Content>
        </SplitView>
    </Grid>
</Window>
